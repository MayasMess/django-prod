services:
  {{ project_name }}:
    container_name: {{ project_name }}
    build:
      context: .
      dockerfile: prod.Dockerfile
    image: {{ project_name }}
    restart: unless-stopped
    command: gunicorn --workers=3 {{ project_name }}.wsgi:application --bind 0.0.0.0:8000
    environment:
      DJANGO_SETTINGS_MODULE: {{ project_name }}.settings_prod
    ports:
      - "8000:8000"
    volumes:
      - sqlite_volume:/code/db
      - static_volume:/code/staticfiles

volumes:
  static_volume:
  sqlite_volume: